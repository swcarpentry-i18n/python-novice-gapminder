---
title: Бібліотеки
teaching: 10
exercises: 10
---

::::::::::::::::::::::::::::::::::::::: objectives

- Поясніть, якими є програмні бібліотеки, і чому програмісти створюють та використовують їх.
- Записувати програми, які імпортують і використовують модулі зі стандартної бібліотеки Python.
- Знайти та прочитати документацію для стандартної бібліотеки інтерактивно (в інтерпретаторі) та онлайн.

::::::::::::::::::::::::::::::::::::::::::::::::::

::::::::::::::::::::::::::::::::::::::::::::: питань

- Як я можу використовувати програму, написану іншими людьми?
- Як я можу дізнатися, що це програмне забезпечення?

::::::::::::::::::::::::::::::::::::::::::::::::::

## Більша частина сили мови програмування полягає в її бібліотеках.

- _бібліотека_ - це колекція файлів (званих _модулі_), що містить функції
  для використання іншими програмами.
  - Також можуть містити значення даних (наприклад, числові константи) та інші речі.
  - Вміст бібліотеки повинен бути пов'язані, але це не так.
- Python [стандартна бібліотека][stdlib] є великим набором модулів, що поставляються
  самим Python.
- Існує багато додаткових бібліотек [PyPI][pypi] (Індекс пакетів Python).
- Пізніше ми побачимо як писати нові бібліотеки.

:::::::::::::::::::::::::::::::::::::::::  callout

## Бібліотеки та модулі

A library is a collection of modules, but the terms are often used
interchangeably, especially since many libraries only consist of a single
module, so don't worry if you mix them.

::::::::::::::::::::::::::::::::::::::::::::::::::

## Програма повинна імпортувати модуль бібліотеки перед її використанням.

- Використовуйте `import`, щоб завантажити модуль бібліотеки в пам'ять.
- Перегляньте з модуля "module_name.thing_name".
  - Python використовує `.`, щоб означати "частина".
- Використовуючи `math`, один з модулів в стандартній бібліотеці:

```python
імпортувати математику

print('pi is', math.pi)
print('cos(pi) це', math.cos(math.pi))
```

```output
pi є 3.141592653589793
cos(pi) дорівнює -1.0
```

- Звертайтеся до кожного елемента з назвою модуля.
  - `math.cos(pi)` не працюватиме: посилання на `pi`
    якось "inherit" функцію посилання на `math`.

## Використовуйте `help`, щоб дізнатися більше про вміст бібліотечного модуля.

- Працює так само як допомога для функції.

```python
допомога (математика)
```

```output
Help on module math:

NAME
    math

MODULE REFERENCE
    http://docs.python.org/3/library/math

    The following documentation is automatically generated from the Python
    source files.  It may be incomplete, incorrect or include features that
    are considered implementation detail and may vary between Python
    implementations.  When in doubt, consult the module reference at the
    location listed above.

DESCRIPTION
    This module is always available.  It provides access to the
    mathematical functions defined by the C standard.

FUNCTIONS
    acos(x, /)
        Return the arc cosine (measured in radians) of x.
⋮ ⋮ ⋮
```

## Імпортувати спеціальні елементи з модуля бібліотеки для скорочення програм.

- Використати `з... імпорт ...` для завантаження тільки конкретних елементів з бібліотеки модуля.
- Потім додайте їх безпосередньо без назви бібліотеки як префікс.

```python
з математичних імпортів cos, pi

print('cos(pi) is', cos(pi))
```

```output
cos (pi) дорівнює -1.0
```

## Створення псевдоніма для модуля бібліотеки при імпорті її до скорочення програм.

- Використати `import ... як ...`, щоб створити бібліотеку короткий _псевдонім_ під час імпортування.
- Потім зверніться до елементів в бібліотеці з використанням цього скороченого імені.

```python
імпортувати математику як m

print('cos(pi) ', m.cos(m.pi))
```

```output
cos (pi) дорівнює -1.0
```

- Найчастіше використовувані для бібліотек, які часто використовуються або мають довгі імена.
  - Наприклад, графік бібліотеки "matplotlib" часто сприймається як "mpl".
- Але можна зробити програми складнішими,
  оскільки читачі повинні вивчити псевдоніми вашої програми.

:::::::::::::::::::::::::::::::::::::::::::: виклик

## Дослідження модуля математики

1. Яку функцію з модуля `math` можна використовувати для розрахунку квадратного кореня
   _без використання_ за допомогою `sqrt`?
2. Оскільки в бібліотеці є ця функція, чому існує `sqrt`?

:::::::::::::::::::: Рішення

## Розв'язок

1. Використовуючи `help(math)`, ми бачимо, що у нас є `pow(x,y)` на додаванні до `sqrt(x)`,
   , тож ми можемо використати `pow(x, 0.5)`, щоб знайти квадратний корінь.

2. Функція `sqrt(x)` ймовірно більш читабельна за `pow(x, 0.5)`, коли
   виконуються рівняння. Readability is a cornerstone of good programming, so it
   makes sense to provide a special function for this specific common case.

Крім того, дизайн бібліотеки Python's має джерело у стандарті C,
який включає і `sqrt(x)` і `pow(x, x, )`, так трохи історії
програмування показується в іменах функцій Python.

:::::::::::::::::::::::::

::::::::::::::::::::::::::::::::::::::::::::::::::

:::::::::::::::::::::::::::::::::::::::::::: виклик

## Розташування правого модуля

Ви хочете вибрати випадковий символ з рядка:

```python
bases = 'ACTTGCTTGAC'
```

1. Which [standard library][stdlib] module could help you?
2. Яку функцію Ви вибираєте з цього модулю? Чи є альтернативи?
3. Спробуйте написати програму, яка використовує функцію.

:::::::::::::::::::: Рішення

## Розв'язок

The [random module][randommod] seems like it could help.

Рядок має 11 символів, кожен з яких є позиційним індексом від 0 до 10.
Ви можете використовувати [`random.випадковий діапазон`](https://docs.python.org/3/library/random.html#.randrange)
або [`random.randint`](https\://docs.python. rg/3/library/random.html#random.randint) функції
щоб отримати випадкове число від 0 до 10, а потім вибрати символ "bases" в цьому індексі:

```python
від випадкового діапазону імпорту

random_index = випадковий діапазон (len(bases))
друк (бази[random_index])
```

або більш компактно:

```python
from random import randrange

print(bases[randrange(len(bases))])
```

Можливо, ви знайшли [`random.sample`](https://docs.python.org/3/library/random.html#random.sample) функцію?
Це дозволяє трохи менше друкувати але може бути трохи складніше зрозуміти лише шляхом читання:

```python
від випадкового зразка імпорту

print(sample(bass, 1)[0])
```

Зверніть увагу, що ця функція повертає список значень. Ми дізнаємося про списки
у [епізод 11](11-lists.md).

Найпростіше і найкоротше рішення - це [`random.choice`](https://docs.python.org/3/library/random.html#choice)
функція, яка виконує саме те, чого ми хочемо:

```python
від випадкового імпорту

print(choice(bases))
```

:::::::::::::::::::::::::

::::::::::::::::::::::::::::::::::::::::::::::::::

:::::::::::::::::::::::::::::::::::::::::::: виклик

## Джігвівський головоломка (проблема парсона) Приклад

Перемістіть наступні вирази так, щоб випадкова
база ДНК надрукована і її індекс у рядку.
Можливо, не всі команди потрібні.  Ви можете використовувати/додати
проміжні змінні.

```python
bases="ACTTGCTTGAC"
import math
import random
___ = random.randrange(n_bases)
___ = len(bases)
print("random base ", bases[___], "base index", ___)
```

:::::::::::::::::::: Рішення

## Розв'язок

```python
імпорт математики 
імпортувати випадкові бази
= "ACTTGAC" 
n_bases = len(bases)
idx = випадково. andrange(n_bases)
print("випадкова база", база[idx], "базовий індекс", idx)
```

:::::::::::::::::::::::::

::::::::::::::::::::::::::::::::::::::::::::::::::

:::::::::::::::::::::::::::::::::::::::::::: виклик

## Коли допомога доступна?

Коли колега ваших типів `help(math)`,
Python повідомляє про помилку:

```error
NameError: name 'math' не визначено
```

Яка ваша колега забута?

:::::::::::::::::::: Рішення

## Розв'язок

Імпорт модуля математики (`імпорт`)

:::::::::::::::::::::::::

::::::::::::::::::::::::::::::::::::::::::::::::::

:::::::::::::::::::::::::::::::::::::::::::: виклик

## Імпорт з псевдонімами

1. Заповніть пропуски так, щоб програма була нижче надрукована на сайті `90.0`.
2. Перезаписати програму, щоб вона використовувала `import` _without_ `as`.
3. Яку форму ви знайдете простіше читати?

```python
імпортувати математику як m
кут = __.degrees(__.pi / 2)
print(__)
```

:::::::::::::::::::: Рішення

## Розв'язок

```python
імпортувати математику як m
кут = m.degrees(m.pi / 2)
print(кут)
```

можна записати як

```python
імпорт математики
кут = math.degrees(math.pi / 2)
print(кут)
```

Since you just wrote the code and are familiar with it, you might actually
find the first version easier to read. Але коли ми намагаємося прочитати величезний шматочок
від коду, написаного кимось іншим, або при поверненні до власного величезного фрагменту
коду через кілька місяців, нескорочені імена часто простіші, крім
, де є чіткі конвенції абревіатури.

:::::::::::::::::::::::::

::::::::::::::::::::::::::::::::::::::::::::::::::

:::::::::::::::::::::::::::::::::::::::::::: виклик

## Є багато шляхів для імпортування бібліотек!

Встанови відповідність наступних друкованих операторів з відповідними бібліотечними викликами.

Друкувати команди:

1. `print("sin(pi/2) =", sin(pi/2))`
2. `print("sin(pi/2) =", m.sin(m.pi/2))`
3. `print("sin(pi/2) =", math.sin(math.pi/2))`

Виклики бібліотеки:

1. `з імпорту гріхів, pi`
2. `імпортувати математику`
3. `імпортувати математику як m`
4. `з імпорту математики *`

:::::::::::::::::::: Рішення

## Розв'язок

1. Бібліотека викликів 1 і 4. Для того, щоб безпосередньо посилатися на `sin` і `pi` без
   назву бібліотеки як префікс, потрібно використати `from ... імпорт ...`
   оператор. У той час як бібліотека викличе 1 спеціально імпортує два функції
   `sin` і `pi`, бібліотека називає 4 імпортами всіх функцій в модуль `math`.
2. Бібліотека зателефонуватиме 3. Here `sin` and `pi` are referred to with a shortened library
   name `m` instead of `math`. Виклик бібліотеки 3 робить те саме що за допомогою
   `імпорт... як синтаксис ...`- він створює псевдонім для `math` у вигляді
   скорочене ім'я `m`.
3. Бібліотека дзвонить 2. Тут `sin` та `pi` посилаються на звичайну бібліотеку
   ім'я `math`, тому регулярні `import ...` викликають достатньо.

**Примітка:** хоча б виклик бібліотеки 4 роботи, імпорт всіх імен модуля за допомогою шаблона
імпорт [не рекомендовано][pep8-imports] тому, що він не очищає, які імена з модуля
використовуються в коді. In general it is best to make your imports as specific as possible and to
only import what your code uses. In library call 1, the `import` statement explicitly tells us
that the `sin` function is imported from the `math` module, but library call 4 does not
convey this information.

:::::::::::::::::::::::::

::::::::::::::::::::::::::::::::::::::::::::::::::

:::::::::::::::::::::::::::::::::::::::::::: виклик

## Імпорт певних елементів

1. Заповніть пропуски так, щоб програма була нижче надрукована на сайті `90.0`.
2. Вам ця версія простіше читати, ніж попередні?
3. Чому саме програмісти не використовують таку форму `import`?

```python
____ імпорту математики __, ____
кут = degrees(pi / 2)
print(кут)
```

:::::::::::::::::::: Рішення

## Розв'язок

```python
від градусів імпорту математики, pi
кут = градуси(pi / 2)
друк (кут)
```

Швидше за все, ця версія легше читати, оскільки вона менш щільна.
Основна причина не використання цієї форми імпорту - уникати зіткнень з іменами.
For instance, you wouldn't import `degrees` this way if you also wanted to
use the name `degrees` for a variable or function of your own. Or if you
were to also import a function named `degrees` from another library.

:::::::::::::::::::::::::

::::::::::::::::::::::::::::::::::::::::::::::::::

:::::::::::::::::::::::::::::::::::::::::::: виклик

## Повідомлення про помилку

1. Прочитайте наведений нижче код та спробуйте визначити, чого не запускають помилки.
2. Запустіть код та прочитайте повідомлення про помилку. Який тип помилки?

```python
з математичного імпортування журналу
лог (0)
```

:::::::::::::::::::: Рішення

## Розв'язок

```output
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-1-d72e1d780bab> in <module>
      1 from math import log
----> 2 log(0)

ValueError: math domain error
```

1. The logarithm of `x` is only defined for `x > 0`, so 0 is outside the
   domain of the function.

2. Ви отримуєте помилку типу `ValueError`, яка вказує, що функція
   отримала неприпустиме значення аргументу. Додаткове повідомлення
   "помилка у вигляді математичного домену" дозволяє зрозуміти в чому проблема.

:::::::::::::::::::::::::

::::::::::::::::::::::::::::::::::::::::::::::::::

[stdlib]: https://docs.python.org/3/library/

[pypi]: https://pypi.python.org/pypi/

[randommod]: https://docs.python.org/3/library/random.html

[pep8-imports]: https://pep8.org/#імпорт

:::::::::::::::::::::::::::::::::::::::: keypoints

- Більша частина сили мови програмування полягає в її бібліотеках.
- Програма повинна імпортувати модуль бібліотеки для того, щоб використовувати її.
- Використовуйте `help`, щоб дізнатися більше про вміст бібліотечного модуля.
- Імпортувати спеціальні елементи з бібліотеки для скорочення програм.
- Створити псевдонім для бібліотеки для імпортування її до скорочення програм.

::::::::::::::::::::::::::::::::::::::::::::::::::
