---
title: 変数と割り当て
teaching: 10
exercises: 10
---

::::::::::::::::::::::::::::::::::

- 変数にスカラー値を割り当て、それらの値で計算を行うプログラムを記述します。
- スカラー代入を使用するプログラムで値の変化を正しく追跡します。

::::::::::::::::::::::::::::::::::::::::::::::::::

::::::::::::::::::::::::::::::::::

- データをプログラムに保存するにはどうすればよいですか?

::::::::::::::::::::::::::::::::::::::::::::::::::

## 値を格納するために変数を使用します。

- **変数** は値の名前です。

- 変数名

  - は**のみ** 文字、数字、アンダースコア`_`を含むことができます (通常は長い変数名の単語を分離するために使用します)
  - は数字で始めることはできません
  - は**大文字と小文字を区別します** (年齢、年齢、年齢は 3 つの異なる変数です)

- あなたや他のプログラマがそれが何であるかを知っているように、名前も意味があるはずです。

- Variable names that start with underscores like `__alistairs_real_age` have a special meaning
  so we won't do that until we understand the convention.

- Python では、`=` シンボルは右側の値を左側の名前に割り当てます。

- 変数は値が割り当てられたときに作成されます。

- ここでPythonは変数`age`
  に年齢を、引用符で囲まれた名前を変数`first_name`に割り当てます。

  ```python
  age = 42
  first_name = 'Ahmed'
  ```

## 値を表示するには `print` を使います。

- Python には `print` と呼ばれる組み込み関数があり、テキストとして出力されます。
- 関数を呼び出す(つまり、Pythonに名前を使って実行するように伝えます)。
- 括弧内の関数(つまり、出力するもの)に値を提供します。
- 印刷に文字列を追加するには、文字列をシングルクォートまたはダブルクォートで囲みます。
- 関数に渡された値は **arguments** と呼ばれます。

```python
print(first_name, 'is', age, 'year old')
```

```output
Ahmedは42歳です
```

- `print` は自動的にアイテムを区切るために1つのスペースを入れます。
- そして最後に新しい行に包み込みます。

## 変数は使用する前に作成する必要があります。

- 変数がまだ存在しない場合、または名前が間違っている場合、
  Pythonはエラーを報告します。 (デフォルト値を「推測」する一部の言語とは異なります。

```python
print(last_name)
```

```error
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
<ipython-input-1-c1fbb4e96102> in <module>()
----> 1 print(last_name)

NameError: name 'last_name' is not defined
```

- エラーメッセージの最後の行は、通常、最も有益です。
- 詳細は [later](17-scope.md#reading-error-messages) のエラーメッセージを見ていきます。

:::::::::::::::::::::::::::::::::::::::::  callout

## 変数をセル間で保持

Jupyter ノートブックで重要なセルの実行の_順序_であることに注意してください。 表示される順序
ではありません。 Python は以前に実行されたコードの _all_ を覚えています。これには、ノートブックの順序に関係なく、
定義された変数が含まれています。 したがって、ノートブックの下に変数を定義し、さらにセルを
(再)実行すると、さらに下に定義された変数が表示されます。 例として、次の内容に続く
を持つ2つのセルをこの順序で作成します。

```python
print(myval)
```

```python
myval = 1
```

これを順番に実行すると、最初のセルはエラーを返します。 しかし、最初のセルを\*\*後\*実行すると、2番目の
セルは`1`が出力されます。 混乱を防ぐために
がインタプリタをクリアし、上から下へときれいなスレートを実行する `Kernel` -> `Restart & Run All` オプションを使用すると便利です。

::::::::::::::::::::::::::::::::::::::::::::::::::

## 変数は計算に使用できます。

- 値であるかのように計算で変数を使用できます。
  - 数行前に、`42`を`age`に割り当てました。

```python
age = age + 3
print('3 年後の年齢:', age)
```

```output
3歳45歳。
```

## 文字列から単一の文字を取得するには、インデックスを使用します。

- 文字列の文字 (個々の文字、数字など) は、
  順に並んでいます。 例えば、`AB'`は`BA'`と同じではありません。
  の順序により、文字列を文字列のリストとして扱うことができます。
- 文字列内の各位置 (最初、秒、など) は数字で指定されています。 この
  番号は**インデックス**またはサブスクリプションと呼ばれます。
- インデックスは0から番号付けされます。
- 位置の文字を取得するには、角括弧内の位置の位置のインデックスを使用します。

![A line of Python code, print(atom_name[0]), ゼロインデックスを使用すると、ヘリウムの「h」の場合、最初の文字だけが出力されることを示しています。 (fig/2_indexing.svg)

```python
atom_name = 'helium'
print(atom_name[0])
```

```output
時間
```

## 部分文字列を取得するにはスライスを使用します。

- 文字列の一部は **substring** と呼ばれます。 部分文字列は
  単一文字と同じ短さにすることができます。
- リスト内の項目は要素と呼ばれます。 文字列を
  がリストであるかのように扱うたびに、文字列の要素はそれぞれの文字です。
- スライスは文字列の一部です(一般的には、リストのようなものの一部です)。
- We take a slice with the notation `[start:stop]`, where `start` is the integer
  index of the first element we want and `stop` is the integer index of
  the element _just after_ the last element we want.
- `stop` と `start` の違いはスライスの長さです。
- スライスを取ることは、元の文字列の内容を変更しません。 代わりに、
  がスライスを取得すると、元の文字列の一部のコピーが返されます。

```python
atom_name = 'sodium'
print(atom_name[0:3])
```

```output
sod
```

## 組み込み関数 `len` を使用して、文字列の長さを求めます。

```python
print(len('helium'))
```

```output
6
```

- 入れ子関数は、数学のように、
  内側から評価されます。

## Python は大文字と小文字を区別します。

- Pythonでは、大文字と小文字が異なるので、
  `Name` と `name` は異なる変数であると考えています。
- 変数名の先頭には大文字を使用する規則がありますので、今は小文字を使用します。

## 意味のある変数名を使用してください。

- Pythonは、ルール
  (英数字とアンダースコア)に従っている限り、変数と呼ぶものを気にしません。

```python
flabadab = 42
ewr_422_yY = 'Ahmed'
print(ewr_422_yY, 'is', flabab, 'years old')
```

- 意味のある変数名を使って、他の人がプログラムが何をするかを理解するのに役立ちます。
- 最も重要な"他の人"は、あなたの未来の自分です。

::::::::::::::::::::::::::::::::: チャレンジ

## 値の入れ替え

このプログラムの
_after_ 各文が実行される変数の値を示すテーブルを埋めます。

```python
# Command  # Value of x   # Value of y   # Value of swap #
x = 1.0    #              #              #               #
y = 3.0    #              #              #               #
swap = x   #              #              #               #
x = y      #              #              #               #
y = swap   #              #              #               #
```

::::::::::::::::: solution

## 解決策

```output
# Command  # Value of x   # Value of y   # Value of swap #
x = 1.0    # 1.0          # not defined  # not defined   #
y = 3.0    # 1.0          # 3.0          # not defined   #
swap = x   # 1.0          # 3.0          # 1.0           #
x = y      # 3.0          # 3.0          # 1.0           #
y = swap   # 3.0          # 1.0          # 1.0           #
```

これらの3行は、`x`と`y`の値を交換し、`swap`
変数を使用して一時的に保存します。 これはかなり一般的なプログラミング慣用語です。

:::::::::::::::::::::::::

::::::::::::::::::::::::::::::::::::::::::::::::::

::::::::::::::::::::::::::::::::: チャレンジ

## 値の予測

`position`の最終値は？
(プログラムを実行せずに値を予測してみてください。
そして予測を確認してください。

```python
initial = 'left'
position = initial
initial = 'right'
```

::::::::::::::::: solution

## 解決策

```python
print(position)
```

```output
左
```

変数`initial`には、`'left'`の値が割り当てられます。
2行目では、変数`position`は文字列値`'left'`を
受け取ります。 3行目では、変数`initial`は
の値`'right'`を与えますが、`position`変数は`'left'`の文字列値
を保持します。

:::::::::::::::::::::::::

::::::::::::::::::::::::::::::::::::::::::::::::::

::::::::::::::::::::::::::::::::: チャレンジ

## チャレンジ

If you assign `a = 123`,
what happens if you try to get the second digit of `a` via `a[1]`?

::::::::::::::::: solution

## 解決策

数値は文字列やシーケンスではなく、もし
数値に対してインデックス操作を行おうとすると、Pythonはエラーになります。 In the [next lesson on types and type conversion](03-types-conversion.md)
we will learn more about types and how to convert between different types. もし、あなたが
のN番目の数字が、組み込み関数`str`を使って文字列に変換し、その文字列に対してインデックス操作を行うことができます。

```python
a = 123
print(a[1])
```

```error
TypeError: 'int' オブジェクトはサブスクリプションテーブルではありません
```

```python
a = str(123)
print(a[1])
```

```output
2
```

:::::::::::::::::::::::::

::::::::::::::::::::::::::::::::::::::::::::::::::

::::::::::::::::::::::::::::::::: チャレンジ

## 名前の選択

`m`と`min`、`min`と`minutes`のどちらが良いですか？
なぜでしょう？
Hint: think about which code you would rather inherit
from someone who is leaving the lab:

1. `ts = m * 60 + s`
2. `tot_sec= min * 60 + sec`
3. `total_seconds = 分* 60 + seconds`

::::::::::::::::: solution

## 解決策

`minutes`は"minimum"
のような意味を持つかもしれません。（実際にはPythonの組み込み関数ですが、後で説明します）

:::::::::::::::::::::::::

::::::::::::::::::::::::::::::::::::::::::::::::::

::::::::::::::::::::::::::::::::: チャレンジ

## スライスの練習

以下のプログラムは何を印刷しますか?

```python
atom_name = 'carbon'
print('atom_name[1:3] is:', atom_name[1:3])
```

::::::::::::::::: solution

## 解決策

```output
atom_name[1:3] : ar
```

:::::::::::::::::::::::::

::::::::::::::::::::::::::::::::::::::::::::::::::

::::::::::::::::::::::::::::::::: チャレンジ

## スライスのコンセプト

以下の文字列が与えられます。

```python
species_name = "Acacia buxifolia"
```

これらの表現は何を返すでしょうか?

1. `種_name[2:8]`
2. `species_name[11:]` (コロンの後の値なし)
3. `species_name[:4]` (コロンの前の値なし)
4. `species_name[:]` (コロンのみ)
5. `種_name[11:-3]`
6. `species_name[-5:-3]`
7. 範囲外の `stop` 値を選択した場合はどうなりますか？ (つまり、 `種_name[0:20]` または `種_name[:103]` を試してみてください)

::::::::::::::::: solution

## ソリューション

1. `species_name[2:8]` は、 `'acia b'` を返します。

2. `species_name[11:]` は、11位置から最後までの部分文字列`'folia'`を返します

3. `species_name[:4]` は、最初から位置4を含まないまで、部分文字列 `'Acac'` を返します。

4. `species_name[:]` は文字列 \`'Acacia buxifolia' 全体を返します。

5. `species_name[11:-3]` は11番目の位置から最後の3番目の位置までの部分文字列 \`'fo' を返します。

6. `species_name[-5:-3]`も最後の5番目の位置から最後の3番目の位置までの部分文字列 \`'fo' を返します。

7. スライスの一部が範囲外の場合、操作は失敗しません。 `species_name[0:20]`は`species_name[0:]`と同じ結果を与え、`species_name[:103]`は`species_name[:]`と同じ結果を与えます。

:::::::::::::::::::::::::

::::::::::::::::::::::::::::::::::::::::::::::::::

:::::::::::::::::::::::::::::::::::::::: keypoints

- 値を格納するために変数を使用します。
- 値を表示するには `print` を使います。
- 変数はセル間で持続します。
- 変数は使用する前に作成する必要があります。
- 変数は計算に使用できます。
- 文字列から単一の文字を取得するには、インデックスを使用します。
- 部分文字列を取得するにはスライスを使用します。
- 組み込み関数 `len` を使用して、文字列の長さを求めます。
- Python は大文字と小文字を区別します。
- 意味のある変数名を使用してください。

::::::::::::::::::::::::::::::::::::::::::::::::::
